<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Car Auction Calculator</title>
<style>
  :root{
    --bg:#0f1115;
    --panel:#171a21;
    --muted:#9aa4b2;
    --text:#e6e9ef;
    --blue:#00007F; /* Calculate button */
    --red:#d7263d;  /* Clear all */
    --accent:#2b90d9;
    --border:#272c36;
    --focus:#3b82f6;
    --radius:14px;
    --input-h:46px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    background:linear-gradient(180deg,#0e1014 0%, #0b0d12 100%);
    color:var(--text); padding:24px;
  }
  .app{
    max-width:1100px; margin:0 auto; display:grid; gap:18px;
  }
  .title{font-weight:700; font-size:24px; letter-spacing:.2px}
  .row{display:grid; grid-template-columns:1fr 1fr; gap:16px}
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.35);
  }

  /* Auction buttons */
  .auctions{display:flex; gap:14px}
  .auction-btn{
    position:relative; display:flex; align-items:center; justify-content:center;
    width:180px; height:64px; border-radius:16px; background:#0b0d12; border:1px solid var(--border);
    cursor:pointer; transition:transform .06s ease, box-shadow .15s ease, border-color .2s ease;
    overflow:hidden;
  }
  .auction-btn img{max-height:38px; opacity:.95}
  .auction-btn:active{ transform:scale(.98) }
  /* red glow only on click */
  .auction-btn.glow{
    box-shadow:0 0 0 2px rgba(215,38,61,.35), 0 0 26px rgba(215,38,61,.45);
    border-color:rgba(215,38,61,.6);
  }

  /* Inputs */
  .field{display:flex; flex-direction:column; gap:8px}
  .label{color:var(--muted); font-size:13px; text-transform:uppercase; letter-spacing:.12em; text-align:center}
  .input, .select-trigger{
    height:var(--input-h); border-radius:12px; background:#0b0d12; border:1px solid var(--border);
    color:var(--text); padding:0 12px; outline:none; font-size:15px; width:100%;
  }
  .input:focus, .select-trigger:focus{border-color:var(--focus); box-shadow:0 0 0 3px rgba(59,130,246,.25)}

  /* Custom searchable dropdown */
  .select{position:relative}
  .select-trigger{display:flex; align-items:center; justify-content:space-between; gap:8px; cursor:pointer}
  .chev{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:7px solid var(--muted)}
  .menu{
    position:absolute; z-index:30; top:calc(100% + 6px); left:0; right:0;
    background:#0b0d12; border:1px solid var(--border); border-radius:12px; overflow:hidden;
    display:none;
  }
  .menu.open{display:block}
  .menu-search{padding:8px}
  .menu-search input{
    width:100%; height:38px; border:1px solid var(--border); background:#0e1219; color:var(--text);
    border-radius:10px; padding:0 10px; outline:none;
  }
  .menu-list{max-height:240px; overflow:auto; border-top:1px solid var(--border)}
  .option{
    padding:10px 12px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,.02);
    font-size:14px;
  }
  .option:hover{background:#121722}
  .option[aria-selected="true"]{background:#11253a}
  .hint{color:var(--muted); font-size:12px}

  /* Buttons line beside Transport type — UPDATED */
  .transport-row{
    display:grid;
    grid-template-columns: 1fr 1fr; /* Transport select | actions (same width as engine type row) */
    gap:10px; 
    align-items:end;
  }
  .actions{
    display:flex;
    justify-content:flex-start; /* change to flex-end to right-align */
    gap:10px;
  }
  .btn{
    height:var(--input-h); padding:0 16px; border-radius:12px; border:1px solid transparent; cursor:pointer;
    font-weight:600; font-size:15px;
  }
  .btn-compact{ width:140px; } /* compact width so both fit on one line */
  .btn-clear{background:var(--red); color:white}
  .btn-calc{background:var(--blue); color:white}
  .btn:active{transform:translateY(1px)}
  .ghost{opacity:.85}

  /* Result summary */
  .summary{display:grid; gap:8px}
  .sum-line{display:flex; justify-content:space-between; gap:10px; border-bottom:1px dashed #202737; padding:8px 0}
  .k{color:var(--muted)}
  .v{font-weight:600}

  /* Responsive */
  @media (max-width:920px){
    .row{grid-template-columns:1fr}
    .transport-row{grid-template-columns:1fr; }
    .actions{flex-direction:column;}
    .btn-compact{width:100%;}
  }
</style>
</head>
<body>
  <div class="app">
    <div class="title">Car Auction Calculator</div>

    <!-- Auctions -->
    <div class="panel">
      <div class="label">Choose auction (no default; glow only on press)</div>
      <div class="auctions" id="auctions">
        <button class="auction-btn" data-auction="IAAI" aria-label="IAAI">
          <img src="assets/iaai.png" alt="IAAI">
        </button>
        <button class="auction-btn" data-auction="Copart" aria-label="Copart">
          <img src="assets/copart.png" alt="Copart">
        </button>
      </div>
      <div class="hint" style="margin-top:8px">Note: Buttons do not stay selected; they only glow on click as requested.</div>
    </div>

    <!-- Inputs -->
    <div class="row">

      <div class="panel">
        <div class="field">
          <div class="label">Location</div>
          <!-- Searchable dropdown with search box inside -->
          <div class="select" id="locationSelect"></div>
          <div class="hint">Start typing to filter the full locations list.</div>
        </div>

        <div class="row" style="margin-top:14px">
          <div class="field">
            <div class="label">Car price (USD)</div>
            <input id="price" class="input" type="number" inputmode="decimal" min="0" step="100" placeholder="e.g. 7500">
          </div>
          <div class="field">
            <div class="label">Production year</div>
            <input id="year" class="input" type="number" min="2013" step="1" placeholder="2018">
          </div>
        </div>

        <div class="row" style="margin-top:14px">
          <div class="field">
            <div class="label">Engine type</div>
            <div class="select" id="engineType"></div>
          </div>

        <div class="field">
            <div class="label">Engine sm³</div>
            <input id="engineVolume" class="input" type="number" min="0" step="100" placeholder="e.g. 1998">
          </div>
        </div>

        <!-- Transport type + buttons on SAME LINE — UPDATED -->
        <div class="field" style="margin-top:14px">
          <div class="label">Transport type</div>
          <div class="transport-row">
            <div class="select" id="transportType"></div>
            <div class="actions">
              <button id="clearAll" class="btn btn-clear btn-compact">Clear all</button>
              <button id="calculate" class="btn btn-calc btn-compact">Calculate</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Live Result -->
      <div class="panel">
        <div class="label">Result summary (live)</div>
        <div class="summary" id="summary"></div>
      </div>
    </div>
  </div>

<script>
/* ---------- Data ---------- */

// “Full” locations list (expanded). You can extend freely.
// Format: "STATE - City" or "Country - City" as needed.
const LOCATIONS = [
  // US (widespread IAAI/Copart coverage)
  "AL - Birmingham","AL - Montgomery","AK - Anchorage",
  "AZ - Phoenix","AZ - Tucson",
  "AR - Little Rock",
  "CA - Los Angeles","CA - San Diego","CA - San Jose","CA - San Francisco","CA - Sacramento","CA - Fresno","CA - Bakersfield","CA - Oakland","CA - Stockton","CA - Riverside",
  "CO - Denver","CO - Colorado Springs",
  "CT - Hartford","CT - New Haven",
  "DE - Wilmington",
  "FL - Miami","FL - Orlando","FL - Tampa","FL - Jacksonville","FL - Fort Lauderdale","FL - West Palm Beach",
  "GA - Atlanta","GA - Savannah",
  "HI - Honolulu",
  "ID - Boise",
  "IL - Chicago","IL - Rockford",
  "IN - Indianapolis",
  "IA - Des Moines",
  "KS - Wichita",
  "KY - Louisville","KY - Lexington",
  "LA - New Orleans","LA - Baton Rouge",
  "ME - Portland",
  "MD - Baltimore",
  "MA - Boston","MA - Springfield",
  "MI - Detroit","MI - Grand Rapids",
  "MN - Minneapolis",
  "MS - Jackson",
  "MO - St. Louis","MO - Kansas City",
  "MT - Billings",
  "NE - Omaha",
  "NV - Las Vegas","NV - Reno",
  "NH - Manchester",
  "NJ - Newark","NJ - Jersey City",
  "NM - Albuquerque",
  "NY - New York","NY - Buffalo","NY - Rochester","NY - Syracuse","NY - Albany",
  "NC - Charlotte","NC - Raleigh","NC - Greensboro",
  "ND - Fargo",
  "OH - Columbus","OH - Cleveland","OH - Cincinnati","OH - Toledo",
  "OK - Oklahoma City","OK - Tulsa",
  "OR - Portland",
  "PA - Philadelphia","PA - Pittsburgh","PA - Harrisburg",
  "RI - Providence",
  "SC - Charleston","SC - Columbia",
  "SD - Sioux Falls",
  "TN - Nashville","TN - Memphis","TN - Knoxville",
  "TX - Houston","TX - Dallas","TX - Austin","TX - San Antonio","TX - El Paso","TX - Fort Worth","TX - Lubbock","TX - McAllen","TX - Corpus Christi",
  "UT - Salt Lake City",
  "VT - Burlington",
  "VA - Richmond","VA - Virginia Beach",
  "WA - Seattle","WA - Spokane","WA - Tacoma",
  "WV - Charleston",
  "WI - Milwaukee","WI - Madison",
  "WY - Cheyenne",
  // Canada (example)
  "ON - Toronto","BC - Vancouver","QC - Montreal","AB - Calgary","AB - Edmonton","MB - Winnipeg","NS - Halifax",
  // Armenia & region (since you’re in Armenia)
  "AM - Yerevan","AM - Gyumri","AM - Vanadzor",
  "GE - Tbilisi","RU - Moscow","TR - Istanbul","AE - Dubai","DE - Berlin","PL - Warsaw","LT - Vilnius"
];

// Engine types
const ENGINE_TYPES = ["Gasoline","Hybrid","Diesel","Full electric"];

// Transport types (same size/style as Engine type)
const TRANSPORT_TYPES = ["Sedan","Pickup","SUV","Big SUV","Minivan","Coupe","Hatchback","Wagon","Convertible","Van"];

/* ---------- Helpers: Select (searchable) ---------- */

function makeSearchableSelect({ mount, placeholder, options, onChange }) {
  const state = { open:false, value:"" };

  const root = document.createElement("div");
  root.className = "select";

  const trigger = document.createElement("button");
  trigger.type = "button";
  trigger.className = "select-trigger";
  trigger.setAttribute("aria-haspopup","listbox");
  trigger.innerHTML = `<span class="val ghost">${placeholder}</span><span class="chev"></span>`;

  const menu = document.createElement("div");
  menu.className = "menu";
  menu.innerHTML = `
    <div class="menu-search"><input type="text" placeholder="Search..." /></div>
    <div class="menu-list" role="listbox"></div>
  `;

  const inputSearch = menu.querySelector("input");
  const list = menu.querySelector(".menu-list");
  let current = null;

  function renderList(filterText="") {
    list.innerHTML = "";
    const f = filterText.trim().toLowerCase();
    const filtered = options.filter(o => o.toLowerCase().includes(f));
    if (filtered.length === 0) {
      const empty = document.createElement("div");
      empty.className = "option";
      empty.textContent = "No results";
      empty.style.opacity = .6;
      list.appendChild(empty);
      return;
    }
    filtered.forEach(opt => {
      const li = document.createElement("div");
      li.className = "option";
      li.setAttribute("role","option");
      li.textContent = opt;
      li.onclick = () => {
        current = opt;
        trigger.querySelector(".val").textContent = opt;
        trigger.querySelector(".val").classList.remove("ghost");
        onChange?.(opt);
        close();
      };
      li.setAttribute("aria-selected", current === opt ? "true" : "false");
      list.appendChild(li);
    });
  }

  function open(){
    state.open = true;
    menu.classList.add("open");
    inputSearch.value = "";
    renderList("");
    setTimeout(() => inputSearch.focus(), 0);
  }
  function close(){
    state.open = false;
    menu.classList.remove("open");
  }

  trigger.addEventListener("click", () => {
    state.open ? close() : open();
  });
  inputSearch.addEventListener("input", () => renderList(inputSearch.value));
  document.addEventListener("click", (e) => {
    if (!root.contains(e.target)) close();
  });

  root.appendChild(trigger);
  root.appendChild(menu);
  mount.appendChild(root);

  return {
    setValue(v){
      current = v;
      trigger.querySelector(".val").textContent = v || placeholder;
      if (!v) trigger.querySelector(".val").classList.add("ghost");
      else trigger.querySelector(".val").classList.remove("ghost");
    },
    getValue(){ return current; }
  };
}

/* ---------- State + UI Wiring ---------- */

const yearNow = new Date().getFullYear();

const state = {
  location: "",
  price: "",
  year: "",
  engineType: "",
  engineVolume: "",
  transportType: ""
};

function $(id){ return document.getElementById(id); }

const summaryEl = $("summary");

function renderSummary(){
  const lines = [
    ["Location", state.location || "—"],
    ["Car price (USD)", state.price ? Number(state.price).toLocaleString() : "—"],
    ["Production year", state.year || "—"],
    ["Engine type", state.engineType || "—"],
    ["Engine sm³", state.engineVolume || "—"],
    ["Transport type", state.transportType || "—"]
  ];
  summaryEl.innerHTML = lines.map(([k,v]) =>
    `<div class="sum-line"><span class="k">${k}</span><span class="v">${v}</span></div>`
  ).join("");
}

/* Build the three dropdowns */
const locationSelect = makeSearchableSelect({
  mount: $("locationSelect"),
  placeholder: "Select location…",
  options: LOCATIONS,
  onChange: (v)=>{ state.location = v; renderSummary(); }
});

const engineSelect = makeSearchableSelect({
  mount: $("engineType"),
  placeholder: "Select engine type…",
  options: ENGINE_TYPES,
  onChange: (v)=>{ state.engineType = v; renderSummary(); }
});

const transportSelect = makeSearchableSelect({
  mount: $("transportType"),
  placeholder: "Select transport type…",
  options: TRANSPORT_TYPES,
  onChange: (v)=>{ state.transportType = v; renderSummary(); }
});

/* Inputs */
const priceEl = $("price");
const yearEl = $("year");
const engineVolEl = $("engineVolume");

/* Initialize sensible defaults */
yearEl.setAttribute("max", String(yearNow));

/* Live bindings */
priceEl.addEventListener("input", () => { state.price = priceEl.value; renderSummary(); });
yearEl.addEventListener("input", () => {
  let v = yearEl.value ? parseInt(yearEl.value,10) : "";
  if (v && (v < 2013)) v = 2013;
  if (v && (v > yearNow)) v = yearNow;
  yearEl.value = v;
  state.year = yearEl.value;
  renderSummary();
});
engineVolEl.addEventListener("input", () => { state.engineVolume = engineVolEl.value; renderSummary(); });

/* Buttons behavior */
$("clearAll").addEventListener("click", () => {
  // Inputs
  priceEl.value = "";
  yearEl.value = "";
  engineVolEl.value = "";
  // Selects
  locationSelect.setValue("");
  engineSelect.setValue("");
  transportSelect.setValue("");
  // State
  state.location = "";
  state.price = "";
  state.year = "";
  state.engineType = "";
  state.engineVolume = "";
  state.transportType = "";
  renderSummary();
});

$("calculate").addEventListener("click", () => {
  // For now, calculation is just a confirmation since fees/taxes weren’t specified.
  // Hook your math here if needed; summary is always live.
  const btn = $("calculate");
  const old = btn.textContent;
  btn.textContent = "Calculated ✓";
  setTimeout(()=> btn.textContent = old, 900);
});

/* Auction glow-on-press only */
document.querySelectorAll(".auction-btn").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    btn.classList.add("glow");
    setTimeout(()=> btn.classList.remove("glow"), 240);
  });
});

/* First render */
renderSummary();
</script>
</body>
</html>
