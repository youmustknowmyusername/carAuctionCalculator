<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Car Auction Calculator</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{--bg:#0c0f16;--fg:#e9eef5;--muted:#9aa8bc;--card:#121725;--accent:#5aa3ff;--line:color-mix(in oklab,var(--fg) 14%,transparent);}
    @media(prefers-color-scheme:light){:root{--bg:#f7f9fc;--fg:#0f1728;--muted:#5c6678;--card:#fff;--accent:#1a6cff;}}
    body{margin:0;background:var(--bg);color:var(--fg);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .container{max-width:1100px;margin:auto;padding:24px}
    header{position:sticky;top:0;z-index:10;background:color-mix(in oklab,var(--bg) 86%,transparent);border-bottom:1px solid var(--line);backdrop-filter:blur(8px)}
    .nav{display:flex;justify-content:space-between;align-items:center}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid-2{grid-template-columns:1.2fr .8fr}}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row.three{grid-template-columns:1fr 1fr 1fr}
    label{font-size:13px;color:var(--muted)}
    input,select{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px;background:transparent;color:var(--fg)}
    input[type=number]{text-align:right}
    .btn{padding:10px 14px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--fg);cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border:none}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px dashed var(--line)}
    tfoot td{font-weight:700}
    .total{font-weight:800;font-size:clamp(22px,3vw,32px);text-align:right}
    .note{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
<header>
  <div class="container nav">
    <div>ðŸš— Car Auction Calculator</div>
  </div>
</header>

<main class="container grid grid-2" style="margin-top:16px">
  <section class="card">
    <h2>Inputs</h2>
    <div class="grid" style="gap:12px">
      <div class="row">
        <div>
          <label for="auction">Auction</label>
          <select id="auction">
            <option value="copart">Copart</option>
            <option value="iaai">IAA</option>
          </select>
        </div>
        <div>
          <label for="location">Auction location</label>
          <select id="location"></select>
        </div>
      </div>
      <div class="row three">
        <div><label for="hammer">Hammer price (USD)</label><input id="hammer" type="number" value="8000"/></div>
        <div><label for="exrate">USDâ†’AMD</label><input id="exrate" type="number" value="395"/></div>
        <div><label for="currency2">Show total in</label><select id="currency2"><option value="USD">USD</option><option value="AMD">AMD</option></select></div>
      </div>
      <div class="row three">
        <div><label for="engine">Engine</label><select id="engine"><option value="gas">Gasoline</option><option value="diesel">Diesel</option><option value="hybrid">Hybrid</option><option value="ev">Electric</option></select></div>
        <div><label for="capacity">Engine cc</label><input id="capacity" type="number" value="1998"/></div>
        <div><label for="age">Vehicle age</label><input id="age" type="number" value="7"/></div>
      </div>
      <div class="row three">
        <div><label for="insurancePct">Insurance % of CIF</label><input id="insurancePct" type="number" value="1"/></div>
        <div><label for="broker">Broker (USD)</label><input id="broker" type="number" value="75"/></div>
        <div><label for="otherFees">Other local (USD)</label><input id="otherFees" type="number" value="300"/></div>
      </div>
      <button id="calcBtn" class="btn primary" type="button">Calculate</button>
    </div>
    <h3 class="mt">Other tables (editable)</h3>
    <div class="grid" style="gap:14px">
      <div class="card"><div>Inland transport</div><table id="inlandTbl"></table></div>
      <div class="card"><div>Ocean freight</div><table id="oceanTbl"></table></div>
      <div class="card"><div>Customs & VAT</div><table id="taxTbl"></table></div>
    </div>
  </section>

  <aside class="card">
    <h2>Result</h2>
    <table>
      <tbody id="resultBody"></tbody>
      <tfoot><tr><td>Total (<span id="curLbl">USD</span>)</td><td id="grandTotal" class="total">0</td></tr></tfoot>
    </table>
  </aside>
</main>

<script>
const DATA={
  locations:[{id:'CA-LOS ANGELES',inland:450},{id:'TX-DALLAS',inland:400}],
  auctionFees:{
    copart:[[1000,99],[5000,319],[999999,699]],
    iaai:[[1000,95],[5000,309],[999999,679]]
  },
  ocean:{base:1050},
  taxes:[{engine:'gas',minAge:0,maxAge:30,ccMin:0,ccMax:3000,dutyPct:10,perCcUSD:0,vatPct:20}]
};
const $=s=>document.querySelector(s);
function fmt(v,c){return(c==='AMD'?Math.round(v):v.toFixed(0)).replace(/\B(?=(\d{3})+(?!\d))/g,',');}
function renderTables(){
  $('#inlandTbl').innerHTML='<tr><th>Location</th><th>Inland</th></tr>'+DATA.locations.map(l=>`<tr><td contenteditable>${l.id}</td><td contenteditable>${l.inland}</td></tr>`).join('');
  $('#oceanTbl').innerHTML='<tr><th>Ocean</th><th>USD</th></tr><tr><td>Base</td><td contenteditable>'+DATA.ocean.base+'</td></tr>';
  $('#taxTbl').innerHTML='<tr><th>Engine</th><th>Age min</th><th>Duty %</th><th>VAT %</th></tr>'+DATA.taxes.map(r=>`<tr><td contenteditable>${r.engine}</td><td contenteditable>${r.minAge}</td><td contenteditable>${r.dutyPct}</td><td contenteditable>${r.vatPct}</td></tr>`).join('');
}
function auctionFee(auction,price){const tiers=DATA.auctionFees[auction];for(const [limit,fee]of tiers){if(price<=limit)return fee;}return tiers.at(-1)[1];}
function inlandByLocation(locId){const it=DATA.locations.find(l=>l.id===locId);return it?it.inland:0;}
function calculate(){
  const auction=$('#auction').value,loc=$('#location').value,price=+$('#hammer').value||0;
  const engine=$('#engine').value,cc=+$('#capacity').value||0,age=+$('#age').value||0;
  const insPct=(+$('#insurancePct').value||0)/100,broker=+$('#broker').value||0,other=+$('#otherFees').value||0;
  const ex=+$('#exrate').value||400,outCur=$('#currency2').value;
  const aFee=auctionFee(auction,price),inland=inlandByLocation(loc),ocean=DATA.ocean.base;
  const cif=price+aFee+inland+ocean,insurance=cif*insPct,duty=(0.1*cif),vat=0.2*(cif+duty);
  const totalUSD=price+aFee+inland+ocean+insurance+duty+vat+broker+other;
  const t=v=>outCur==='AMD'?fmt(v*ex,'AMD'):fmt(v,'USD');
  $('#resultBody').innerHTML=`<tr><td>Hammer</td><td>${t(price)}</td></tr><tr><td>Auction fee</td><td>${t(aFee)}</td></tr><tr><td>Inland</td><td>${t(inland)}</td></tr><tr><td>Ocean</td><td>${t(ocean)}</td></tr><tr><td>Insurance</td><td>${t(insurance)}</td></tr><tr><td>Duty</td><td>${t(duty)}</td></tr><tr><td>VAT</td><td>${t(vat)}</td></tr><tr><td>Broker</td><td>${t(broker)}</td></tr><tr><td>Other</td><td>${t(other)}</td></tr>`;
  $('#grandTotal').textContent=t(totalUSD);$('#curLbl').textContent=outCur;
}
function fillLocations(){const sel=$('#location');sel.innerHTML='';DATA.locations.forEach(l=>{const o=document.createElement('option');o.value=l.id;o.textContent=l.id;sel.appendChild(o);});}
document.addEventListener('DOMContentLoaded',()=>{renderTables();fillLocations();calculate();$('#calcBtn').addEventListener('click',calculate);});
</script>
</body>
</html>
